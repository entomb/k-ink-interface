Ink.createModule("Ink.Plugin.Kink",1,["Ink.Dom.Browser_1","Ink.Dom.Selector_1","Ink.Dom.Event_1","Ink.Dom.Element_1","Ink.Dom.Css_1","Ink.Dom.Loaded_1","Ink.Util.Array_1","Ink.Util.Url_1","Ink.Util.String_1","Ink.Util.Date_1","Ink.Util.Cookie_1","Ink.Net.Ajax","Ink.Net.JsonP"],function(Browser,Selector,Event,Element,Css,Loaded,InkArray,InkUrl,InkString,InkDate,InkCookie,Ajax,JsonP){var liveEventsHandler=function(event){return Ink.bindEvent(function(e){for(var selector in kink.liveEvents[event]){var arrElem=Selector.select(selector),tgtEl=Event.element(e);if(arrElem.indexOf(tgtEl)!==-1){InkArray.each(kink.liveEvents[event][selector],function(fn){fn.call(tgtEl,e)})}}},this)};var kResult=function(resultArray,selector){this.selector=selector||false;if(resultArray instanceof Array){this.arr=resultArray||[]}else{return kink(resultArray)}this.get=function(i){if(i===undefined){i=0}return new kResult(this.arr[i])};this.result=function(i){if(i===undefined){return this.arr}else{return this.arr[i]}};this.last=function(i){return new kResult(this.arr[this.arr.length-1])};this.first=function(i){return new kResult(this.arr[0])};return this};kResult.prototype.length=function(){return this.arr.length};kResult.prototype.each=function(iterator){InkArray.each(this.arr,iterator);return this};kResult.prototype.filter=function(iterator){this.arr=this.arr.filter(iterator);return this};kResult.prototype.some=function(iterator,context){return InkArray.some(this.arr,iterator,context)};kResult.prototype.has=function(param){return InkArray.inArray(kk(param).result(0),this.arr)};kResult.prototype.is=function(param){return InkArray.inArray(this.result(0),kk(param).result())};kResult.prototype.addClassName=kResult.prototype.addClass=function(className){this.each(function(elem){if(className instanceof Array){kink(className).each(function(iclass){Css.addClassName(elem,iclass)})}else{Css.addClassName(elem,className)}});return this};kResult.prototype.removeClassName=kResult.prototype.removeClass=function(className){this.each(function(elem){if(className===undefined){elem.className=null}else{if(className instanceof Array){kink(className).each(function(iclass){Css.removeClassName(elem,iclass)})}else{Css.removeClassName(elem,className)}}});return this};kResult.prototype.setClassName=kResult.prototype.setClass=function(className,boolState){this.each(function(elem,key){Css.setClassName(elem,className,boolState)});return this};kResult.prototype.hasClassName=kResult.prototype.hasClass=function(className){return this.some(function(elem,key){return Css.hasClassName(elem,className)})};kResult.prototype.visible=function(){return(this.css("display")!="none"&&this.css("opacity")>0&&this.css("visibility")!="hidden")};kResult.prototype.hide=function(){this.each(function(elem){Css.hide(elem)});return this};kResult.prototype.show=function(){this.each(function(elem){Css.show(elem)});return this};kResult.prototype.showHide=function(boolState){this.each(function(elem){Css.showHide(elem,boolState)});return this};kResult.prototype.toggle=function(){this.each(function(elem){Css.toggle(elem)});return this};kResult.prototype.style=kResult.prototype.setStyle=function(inlineStyle){this.each(function(elem){Css.setStyle(elem,inlineStyle)});return this};kResult.prototype.css=function(prop,value){if(typeof this.result(0)!="object"||!this.result(0).hasOwnProperty("style")){return false}if(value===undefined){return Css.getStyle(this.result(0),prop)}else{this.setStyle(prop+":"+value)}return this};kResult.prototype.on=kResult.prototype.bind=function(ev,selector,callback){if(selector!==undefined){if(typeof selector==="function"){callback=selector}else{cb=callback;callback=Ink.bindEvent(function(event){var elm=Event.element(event);var context=this.find(selector);var result=true;if(context.result().indexOf(elm)===-1){result=context.some(Ink.bind(function(elem){return Ink.ss(elm.nodeName,elem).indexOf(elm)!==-1},this));if(!result){return}}if(result){cb.call(this,event,elm)}},this)}}if(callback===undefined){this.each(function(elem){Event.fire(elem,ev)})}else{this.each(function(elem){Event.observe(elem,ev,callback)})}return this};kResult.prototype.live=function(event,callback){if(typeof(this.selector)!=="string"){return}if(!(event in kink.liveEvents)){Event.observe(document,event,liveEventsHandler(event))}if(!(event in kink.liveEvents)){kink.liveEvents[event]={}}if(!(this.selector in kink.liveEvents[event])){kink.liveEvents[event][this.selector]=[]}kink.liveEvents[event][this.selector].push(callback);return this};kResult.prototype.die=function(event,handler){if(typeof handler!=="undefined"){if(!(this.selector in kink.liveEvents[event])){return}var pos=kink.liveEvents[event][this.selector].indexOf(handler);if(pos!==-1){kink.liveEvents[event][this.selector].splice(pos,1)}}else{kink.liveEvents[event][this.selector].splice(0,(kink.liveEvents[event][this.selector].length-1))}if(kink.liveEvents[event][this.selector].length===0){delete kink.liveEvents[event][this.selector]}var numProps=0;for(var sel in kink.liveEvents[event]){if(kink.liveEvents[event].hasOwnProperty(sel)){numProps++}}if(numProps===0){Event.stopObserving(document,event,liveEventsHandler(event))}return this};kResult.prototype.click=function(callback){return this.bind("click",callback)};kResult.prototype.dblclick=function(callback){return this.bind("dblclick",callback)};kResult.prototype.focus=function(callback){return this.bind("focus",callback)};kResult.prototype.blur=function(callback){return this.bind("blur",callback)};kResult.prototype.change=function(callback){return this.bind("change",callback)};kResult.prototype.mousemove=function(callback){return this.bind("mousemove",callback)};kResult.prototype.mouseover=function(callback){this.bind("mouseover",callback);return this};kResult.prototype.mouseout=function(callback){this.bind("mouseout",callback);return this};kResult.prototype.hover=function(callbackIn,callbackOut){if(callbackOut===undefined){this.mouseover(callbackIn)}else{this.mouseover(callbackIn).mouseout(callbackOut)}return this};kResult.prototype.appendTo=function(select){this.each(function(elem){kink(select).result(0).appendChild(elem)});return this};kResult.prototype.create=function(tag,options){this.each(function(elem){kink.create(tag,options).appendTo(elem)});return this};kResult.prototype.html=function(html){if(html===undefined){html="";this.each(function(elem){html+=Element.textContent(elem).replace(/\n/g," ")});return html}this.each(function(elem){Element.setTextContent(elem,html)});return this};kResult.prototype.appendHTML=function(html){this.each(function(elem){Element.appendHTML(elem,html)});return this};kResult.prototype.prependHTML=function(html){this.each(function(elem){Element.prependHTML(elem,html)});return this};kResult.prototype.remove=function(){this.each(function(elem){Element.remove(elem)});return true};kResult.prototype.data=function(key,value){if(key!==undefined&&value!==undefined){this.each(function(elem){kink(elem).attr("data-"+key,value)});return this}else{if(key!==undefined){var Data=Element.data(this.result(0));return(Data[key]!==undefined)?Data[key]:null}else{return Element.data(this.result(0))}}};kResult.prototype.size=kResult.prototype.elementDimensions=function(){return Element.elementDimensions(this.result(0))};kResult.prototype.height=kResult.prototype.elementHeight=function(){return Element.elementHeight(this.result(0))};kResult.prototype.width=kResult.prototype.elementWidth=function(){return Element.elementWidth(this.result(0))};kResult.prototype.absolutePosition=kResult.prototype.offset=function(){return Element.offset(this.result(0))};kResult.prototype.position=kResult.prototype.offset2=function(){return Element.offset2(this.result(0))};kResult.prototype.hasAttribute=function(attr){return this.some(function(elem){return Element.hasAttribute(elem,attr)})};kResult.prototype.attr=kResult.prototype.attribute=function(attr,value){if(value!==undefined){this.each(function(elem){elem.setAttribute(attr,value)});return this}else{if(this.result(0)){return this.result(0).getAttribute(attr)}else{return null}}};kResult.prototype.name=function(value){if(value!==undefined){this.each(function(elem){elem.setAttribute("name",value)});return this}else{if(this.result(0)){return this.result(0).getAttribute("name")}else{return null}}};kResult.prototype.id=function(value){if(value!==undefined){this.each(function(elem){elem.setAttribute("id",value)});return this}else{if(this.result(0)){return this.result(0).getAttribute("id")}else{return null}}};kResult.prototype.tag=function(){if(this.result(0)){return this.result(0).nodeName.toUpperCase()}else{return null}};kResult.prototype.checked=function(value){if(value===undefined){var elem=this.get(0)||false;if(elem.attr("type")=="checkbox"||elem.attr("type")=="radio"){return !!elem.attr("checked")}else{return false}}else{this.each(function(elem){kink(elem).attr("checked",value?false:"")});return this.on("change")}};kResult.prototype.value=kResult.prototype.val=function(value){if(value===undefined){var elem=this.result(0);if(elem===undefined){return false}if(elem.nodeName=="SELECT"){return elem.options[elem.selectedIndex].value}else{if(elem.nodeName=="TEXTAREA"){return elem.innerHTML}else{return elem.value}}}else{this.each(function(elem){if(elem.nodeName=="SELECT"){var index=false;kink(InkArray.convert(elem.options)).each(function(opt,k){if(opt.value==value){index=k}});if(index){elem.selectedIndex=index}}else{if(elem.nodeName=="TEXTAREA"){elem.innerHTML=value}else{elem.value=value}}});return this.on("change")}};kResult.prototype.scroll=function(){return Element.scroll(this.result(0))};kResult.prototype.scrollTo=function(){return Element.scrollTo(this.result(0))};kResult.prototype.siblings=function(){var foundElements=[];this.each(function(elem){var elemFilter=Element.siblings(elem);if(elemFilter){Ink.Util.Array.each(elemFilter,function(elemSibling){if(!Ink.Util.Array.inArray(elemSibling,foundElements)){foundElements.push(elemSibling)}})}});return new kResult(foundElements)};kResult.prototype.next=function(){var foundElements=[];this.each(function(elem){var elemFilter=Element.nextElementSibling(elem);if(elemFilter&&!Ink.Util.Array.inArray(elemFilter,foundElements)){foundElements.push(elemFilter)}});return new kResult(foundElements)};kResult.prototype.prev=function(){var foundElements=[];this.each(function(elem){var elemFilter=Element.previousElementSibling(elem);if(elemFilter&&!Ink.Util.Array.inArray(elemFilter,foundElements)){foundElements.push(elemFilter)}});return new kResult(foundElements)};kResult.prototype.parent=function(){var parents=[];this.each(function(elem,num){if(elem.parentNode&&!Ink.Util.Array.inArray(elem.parentNode,parents)){parents.push(elem.parentNode)}});return new kResult(parents)};kResult.prototype.childs=function(i){var fetchedChilds=[];this.each(function(elem){var collection=InkArray.convert(elem.children);var childs=new kResult(collection);childs.each(function(childElem){fetchedChilds.push(childElem)})});if(typeof i!=="number"&&!i){return new kResult(fetchedChilds)}else{return new kResult(fetchedChilds).get(i)}};kResult.prototype.find=function(param){var foundElements=[];this.each(function(elem){var elements=new kResult(Selector.select(param,elem));elements.each(function(childElem){if(!Ink.Util.Array.inArray(childElem,foundElements)){foundElements.push(childElem)}})});return new kResult(foundElements)};var kink=function(param,context){if(!param||param===null||param===undefined){return new kResult([])}else{if(typeof param==="string"){return new kResult(Selector.select(param,context),param)}else{if(param instanceof Array){return new kResult(param)}else{if(param instanceof Function){return new kink(param.call(context))}}}}if(param instanceof kResult){return param}else{return new kResult([param])}};kink.liveEvents={};kink.viewportHeight=Element.viewportHeight;kink.viewportWidth=Element.viewportWidth;kink.ready=function(callable){Loaded.run(callable)};kink.appendStylesheet=function(path,options){Css.appendStylesheet(path,options)};kink.browser=Browser;kink.url=InkUrl;kink.date=InkDate;kink.string=InkString;kink.cookie=InkCookie;kink.extend=function(method,callable){if(kResult.prototype[method]===undefined){kResult.prototype[method]=callable;return true}return false};kink.ajax=function(url,options,onComplete){var cb=onComplete,method="Ajax";if(typeof options==="function"){cb=options;options={onComplete:cb}}else{options=Ink.extendObj(options,{onComplete:cb});if(options.jsonp){method="JsonP"}}return new method.call(this,url,options)};kink.create=function(tag,options){return new kResult([Element.create(tag,options)])};window.kResult=kResult;window.kk=kink;return kink});